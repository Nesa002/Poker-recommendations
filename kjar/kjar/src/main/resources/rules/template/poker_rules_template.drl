template header
ruleName
stakeLevel
salience
raiseThreshold
stakesOperator
positionThreshold
handCategory
requiresStrongEconomy
requiresAggressiveTable
action
log

template "poker-rules"

rule "@{ruleName}"
activation-group "@{stakeLevel}"
salience @{salience}
when
    $r: Round()
    eval($r.getCurrentRaise() @{raiseThreshold} (min_bigger_raise * $r.getPot()) && $r.getCurrentRaise() @{stakesOperator} min_bigger_raise_blinds)
    @{(handCategory != null && handCategory.trim() != "") ? 
        "eval(handEvalService.isHandAtLeast($r.getHand(), \"" + handCategory + "\"))" : ""}
    @{(positionThreshold != null && positionThreshold.trim() != "") ? 
        "eval($r.getPlayerPosition() > " + positionThreshold + ")" : ""}
    @{(requiresStrongEconomy != null && requiresStrongEconomy.trim() == "true") ? 
        "eval($r.getStrongEconomy())" : ""}
    @{(requiresAggressiveTable != null && requiresAggressiveTable.trim() == "true") ? 
        "eval(handService.isTableAggressive())" : ""}
then
    $r.setSuggestedAction("@{action}");
    System.out.println("Action: @{log}");
end

end template
